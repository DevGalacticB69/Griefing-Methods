# UUID Spoofing

UUID spoofing is a well-known Bungeecord exploit - mainly used to grief servers. It's one of the most used methods to gain administrator permissions on vulnerable Minecraft networks.

**Overview**

UUID stands for "Unique User Identifier" which is the ID used to identify players. In the real world we kinda have the same system called SSN - "Social Security Number" which is used to identify people.

To understand how UUID spoofing works, we need to take a look at how Bungeecord works. A Bungeecord network consists of a proxy server and sub servers. The sub servers has to be in offline mode in order to make the Bungeecord system work. The proxy is the only server that is in online mode by default to make sure players can't login using cracked accounts (accounts that doesn't exist etc.).

Offline mode means no Mojang session authentication on login, which means you can login to the server using any username you want.
Online mode means there's an authentication process on login to make sure players are using valid accounts they logged in to (valid session).

**Analysis**

As mentioned, all sub servers are in offline mode, which means that Mojang doesn't check your username or session ID when logging on to the server and because of this you can log in to the server using any username you want by modifying the handshake packet sent when logging in to the server.

Normal login handshake packet:
```
+---------+-----------------+--------------+-----------+-------------+
| pkt. id | server protocol | dst. address | dst. port | login state |
+---------+-----------------+--------------+-----------+-------------+
 ```

Modified login handshake packet:
```
+---------+-----------------+----------------+-----------+-------------+
| pkt. id | server protocol | dst. address   | dst. port | login state |
+---------+-----------------+----------------+-----------+-------------+
                            | src. address   |
                            +----------------+
                            | spoofed UUIDv4 |
                            +----------------+
 ```

Src. address: This field can be spoofed to any IP-address you want (yes even '0.0.0.0' and '127.0.0.1'). This can be used to make you roughly untraceable.
Spoofed UUIDv4: In this field you put in the UUID of an operator on the server. Everything on servers are bound to players UUID which means you'll have the same permissions as the operator (including OP).
 
Read more about the handshake packet at: https://wiki.vg/Protocol#Handshake


**UUID SPOOFING IS NOT A VULNERABILITY IN SERVER SOFTWARE OR PROTOCOL!** The way Spigot handles the login handshake packets is intended and not a bug!